# IFAWL Auto Pilot 自动辅助驾驶
## 超快速上手指南
### 0.5.0-alpha 版本
*Csugu Miso Tecrel*  
**联邦海军 浅草寺重工 发行**

---

## 了解 Auto Pilot
**本小节内容包括：**
*   什么是 Auto Pilot 自动辅助驾驶（AP）
*   如何使用 AP

### 什么是 Auto Pilot
Auto Pilot 允许玩家在战斗航行日输入操作时，向舰船输入一串包含大量操作信息的指令。舰船将在之后的航行日里，自动读取并执行这些指令，无需每日手动输入。

**在该版本中，Auto Pilot 包含以下功能：**
*   **一般操作**  
    *例如：“先上一个盾，第二天再上一个导弹，第三天发射”*
*   **逻辑判断**  
    *例如：“如果这天对面盾空了，发射导弹，否则上盾”*
*   **循环**  
    *例如：“持续输入w，直到我的盾高于4”*

### 使用 Auto Pilot
在航行日内，当系统提示：
`请输入你的操作>>>`
你可以直接输入 Auto Pilot 语法指令。

**例如：**
```
w-w-w-[ps>2]q;w-e
```
**意为：**
> 前三天，使用三次生存位（w）。  
> 下一天，如果我方护盾大于 2，则使用主武器（q），否则使用生存位（w）。  
> 最后一天，使用战术位（e）。

详细的语法规则请见下一节。

---

## Auto Pilot 语法规则

### 基本操作
使用短横线 **`-`** （减号）来分隔不同日期的操作。
1.  开头直接输入操作。
2.  对于后续的每一个操作，先输入一个减号 `-`，再输入操作。
3.  重复直到指令结束。

**示例：**
*   `w-2-0-1-e` -> 生存位 - 上盾 - 上弹 - 发射 - 战术位
*   `0-q-q-0-q` -> 上弹 - 主武器 - 主武器 - 上弹 - 主武器

### 逻辑判断
当需要根据状态条件选择不同操作时，使用逻辑判断语句。

**框架：**
```
... - [逻辑表达式] 为真时执行的操作 ; 为假时执行的操作 - ...
```

**填写方法：**
1.  在 `[ ]` 内输入**逻辑表达式**。
2.  在 `]` 后输入表达式为 **真（True）** 时要执行的操作（多个操作用逗号 `,` 连接）。
3.  在 `;` 后输入表达式为 **假（False）** 时要执行的操作。
4.  用 `-` 连接后续其他操作。

**示例：**
> “在上弹后，如果护盾为0则连续上两次盾，否则发射导弹。最后再次上弹。”

代码为：
```
0-[ps==0]2,2;1-0
```
**分解：**
`0` - `[ps==0]` `2,2` `;` `1` - `0`  
`上弹` - `如果我方护盾为零` `那么上盾,再上盾` `否则` `发射` - `最后上弹`

#### 逻辑表达式术语表
| 术语                   | 解释                    |
|:---------------------|:----------------------|
| `ps`                 | 我方护盾 (Player Shield)  |
| `pm`                 | 我方导弹 (Player Missile) |
| `cs`                 | 敌方护盾 (Enemy Shield)   |
| `cm`                 | 敌方导弹 (Enemy Missile)  |
| `p`                  | 跳过（用于条件操作）       |
| `<`, `<=`, `>`, `>=` | 小于/小于等于/大于/大于等于|
| `==`, `!=`           | 等于（注意是双等号）不等于 |
| `and`, `or`, `not`   | 与，或，非                |
| `q`, `w`, `e`        | 主武器，生存位，战术位     |（高阶应用）

### 循环
当需要重复执行某些操作直到满足条件时，使用循环。

**框架：**
```
... - (循环内的操作串 - [再循环判断表达式]) - ...
```

**规则：**
1.  将要循环的操作串用圆括号 `()` 括起来，操作间用 `-` 分隔。
2.  在循环操作串的最后一个操作后，输入 `-` 和一对方括号 `[]`。
3.  在 `[ ]` 内输入**再循环判断表达式**。
    *   如果表达式为 **真（True）**，则跳回 `(` 后开始下一次循环。
    *   如果表达式为 **假（False）**，则跳出循环，继续执行 `)` 后的指令。

**示例：**
> “在上弹后，持续上盾直到护盾大于3。之后发射导弹，最后再次上弹。”

代码为：
```
0-(2-[ps<=3])-1-0
```
**分解：**
`0` - `(` `2` - `[ps<=3]` `)` - `1` - `0`  
`上弹` - `循环开始` `上盾` - `若护盾<=3则继续循环` `循环结束` - `发射导弹` - `上弹`

> **提示：**
> *   在 `[ ]` 内输入 `True` 或 `1==1`，可进行永久循环。
> *   **注意：** 循环和逻辑判断不能自身嵌套，但循环内部可以包含逻辑判断。

**高阶应用：**
> *   需要一定python基础
通过qwe读取state，进而更加智能的自动驾驶（state点数与状态对应关系请自行查阅源代码）
**示例：**
> 选用al24大奶油，al38澈，al13北极
> ([q==0]q;w-[pm>1]e;p-[True])

意为：
```
“在q即大奶油为初始态时使用大奶油，否则按w用澈的主动消耗密钥；如果我的导弹大于一则使用北极，否则跳过这个行动；若满足条件[True]，则从头开始循环”
---

## 总结
Auto Pilot 允许玩家在战斗伊始输入一串指令，之后舰船将自动识别战场态势并执行操作。无需每日手动输入，即可驾驭战局，航向未来。